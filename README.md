# Mole for Raycast üêπ

Deep clean and optimize your Mac directly from Raycast. This extension serves as a graphical and blazing fast interface to the [Mole](https://github.com/KoukeNeko/Mole) CLI utility.

## Commands

- **Mole Dashboard**: Central dashboard for system status, updates, and settings.
- **System Optimizer**: Rebuild caches, clear DNS, and optimize macOS performance.
- **Deep Clean**: Remove caches, logs, and unneeded system files.
- **App Uninstaller**: Completely remove applications and their associated Library files.
- **Project Purger**: Find and remove heavy `node_modules`, `target`, `build`, and `dist` folders.
- **Installer Cleaner**: Detect and clean left-over `.dmg`, `.pkg`, `.zip`, and `.xip` files.

---

## Technical Architecture & Design

While this extension is designed to interface with the `mo` CLI tool, **certain features have been rewritten natively in Node.js/TypeScript** to provide a better, faster, and more interactive Raycast experience. 

### Native Raycast Implementations (Does NOT use `mo` CLI backend)

To provide real-time UI feedback, live calculating sizes, and interactive checkboxes, the following commands execute natively using Node.js filesystem (`fs`) APIs and `child_process` strictly for size calculation. **They do not call the `mo` bash script under the hood:**

1. **Installer Cleaner (`mo installer`)**
   - **How it works:** Uses a native recursive Node.js scanner (depth of 2) across common download and cache directories (including `~/Library/Caches/Homebrew`). 
   - **Why native?** Apple's native Spotlight (`mdfind`) refuses to index `~/Library` paths natively. Replicating the `mo installer`'s `fd/find` behavior natively inside Raycast ensures we find hidden `.zip` (with installer payloads) and `.pkg` files without the overhead of calling the bash script and parsing its visual output.
2. **Project Purger (`mo purge`)**
   - **How it works:** Native `fs` recursive scanning for `node_modules` and compiled target directories based on predefined settings.
   - **Why native?** Allows real-time progress updates and size calculations within the Raycast List UI as directories are discovered.
3. **App Uninstaller (`mo uninstall`)**
   - **How it works:** Scans `/Applications` and `~/Applications` natively.
   - **Why native?** The `mo uninstall` CLI is heavily TUI-based (Terminal UI) and doesn't easily output headless structural data. A native implementation allows Raycast to render app icons, display calculated sizes faster, and natively bin the applications.

### CLI Wrappers (Uses `mo` CLI backend)

The following commands act as wrappers, actively calling `mo` and parsing its stdout/JSON output:

- **System Status Dashboard**: Parses JSON generated by `generate_health_json.sh`.
- **System Optimizer (`mo optimize`)**: Executes `mo optimize --dry-run` to fetch optimizable targets, and runs `mo optimize` for execution.
- **Deep Clean (`mo clean`)**: Executes `mo clean --dry-run` to get cleanable targets.
- **Settings/Update**: Directly triggers `mo update` and `mo touchid`.